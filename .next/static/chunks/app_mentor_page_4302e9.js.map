{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/DELL/hackathonproject/job/app/mentor/page.js"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport { Send, Paperclip, X } from \"lucide-react\";\n\nconst socket = io(\"http://localhost:5000\");\n\nexport default function MentorChat({ userId, mentorId, onClose }) {\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [file, setFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n\n  useEffect(() => {\n    if (mentorId) {\n      socket.emit(\"joinRoom\", { userId, mentorId });\n\n      const messageHandler = (msg) => setMessages((prev) => [...prev, msg]);\n      const typingHandler = (typing) => setIsTyping(typing);\n\n      socket.on(\"message\", messageHandler);\n      socket.on(\"typing\", typingHandler);\n\n      return () => {\n        socket.off(\"message\", messageHandler);\n        socket.off(\"typing\", typingHandler);\n      };\n    }\n  }, [mentorId]);\n\n  const sendMessage = () => {\n    if (message.trim() !== \"\") {\n      const newMessage = {\n        userId,\n        mentorId,\n        type: \"text\",\n        content: message,\n        timestamp: new Date().toLocaleTimeString(),\n      };\n      socket.emit(\"sendMessage\", newMessage);\n      setMessages((prev) => [...prev, newMessage]);\n      setMessage(\"\");\n    }\n  };\n\n  const handleTyping = () => {\n    socket.emit(\"typing\", { userId, mentorId });\n  };\n\n  const uploadFile = async () => {\n    if (!file) return;\n    setUploading(true);\n\n    const formData = new FormData();\n    formData.append(\"attachment\", file);\n    formData.append(\"userId\", userId);\n\n    try {\n      const res = await fetch(\"http://localhost:5000/uploadAttachment\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!res.ok) throw new Error(\"Upload failed\");\n\n      const data = await res.json();\n      const fileMessage = {\n        userId,\n        mentorId,\n        type: \"file\",\n        content: data.url,\n        timestamp: new Date().toLocaleTimeString(),\n      };\n\n      socket.emit(\"sendMessage\", fileMessage);\n      setMessages((prev) => [...prev, fileMessage]);\n      setFile(null);\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <div className=\"mt-6 w-full bg-white shadow-xl rounded-lg border\">\n      <div className=\"p-3 bg-yellow-500 rounded-lg text-white flex justify-between items-center\">\n        <span className=\"font-bold\">Chat with Mentor</span>\n        <button onClick={onClose} className=\"text-white\">\n          <X size={20} />\n        </button>\n      </div>\n\n      <div className=\"p-3 h-64 overflow-y-auto\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`p-2 my-2 ${msg.userId === userId ? \"text-right\" : \"text-left\"}`}>\n            <div className={`inline-block p-2 rounded-lg ${msg.userId === userId ? \"bg-yellow-500 text-white\" : \"bg-yellow-500 text-white\"}`}>\n              {msg.type === \"text\" ? (\n                <span>{msg.content}</span>\n              ) : (\n                <a href={msg.content} target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline\">\n                  ðŸ“Ž View Attachment\n                </a>\n              )}\n            </div>\n            <div className=\"text-xs text-gray-500 mt-1\">{msg.timestamp}</div>\n          </div>\n        ))}\n        {isTyping && <div className=\"text-gray-400 text-sm\">Mentor is typing...</div>}\n      </div>\n\n      {/* Input & File Upload */}\n      <div className=\"p-3 border-t text-white flex items-center\">\n        <input\n          type=\"text\"\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          onKeyPress={handleTyping}\n          placeholder=\"Type a message...\"\n          className=\"flex-grow bg-yellow-500 text-white placeholder-white p-2 border rounded-lg\"\n        />\n        <button onClick={sendMessage} className=\"ml-2 p-2 bg-yellow-500 text-white rounded-lg\">\n          <Send size={20} />\n        </button>\n\n        {/* File Upload */}\n        {!file ? (\n          <label htmlFor=\"fileUpload\" className=\"ml-2 p-2 bg-yellow-500 rounded-lg cursor-pointer\">\n            <Paperclip size={20} />\n          </label>\n        ) : (\n          <button\n            onClick={uploadFile}\n            className=\"ml-2 p-2 bg-yellow-500 text-white rounded-lg\"\n            disabled={uploading}\n          >\n            {uploading ? \"Uploading...\" : \"Upload\"}\n          </button>\n        )}\n        <input\n          type=\"file\"\n          className=\"hidden\"\n          id=\"fileUpload\"\n          onChange={(e) => setFile(e.target.files[0])}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}